"use client";

import { useEffect, useRef, useState } from 'react';

export function Team() {
  const sectionRef = useRef<HTMLElement>(null);
  const [isVisible, setIsVisible] = useState(false);
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.disconnect(); // Stop observing once it's visible
        }
      },
      {
        threshold: 0.1, // Trigger when 10% of the element is visible
        rootMargin: '0px 0px -50px 0px' // Adjust as needed
      }
    );

    if (sectionRef.current) {
      observer.observe(sectionRef.current);
    }

    return () => {
      if (observer) observer.disconnect();
    };
  }, []);

  return (
    <section 
      ref={sectionRef}
      className={`TeamCTASection_section__b7Q_X ${isVisible ? 'visible' : ''}`}
    >
      <div className="TeamCTASection_container__Zsyfr">
        <div 
          className={`TeamCTASection_card__YC92y ${isVisible ? 'fade-in' : ''}`} 
          style={{ opacity: isVisible ? 1 : 0, transform: isVisible ? 'none' : 'translateY(20px)' }}
        >
          <div className={`TeamCTASection_backgroundWrapper__z0TsL ${isVisible ? 'fade-in' : ''}`}>
            <svg width="1440" height="614" viewBox="0 0 1440 614" fill="none" xmlns="http://www.w3.org/2000/svg" className="TeamCTASection_backgroundSvg__4TB72"><g opacity="0.3"><path opacity="0.3" d="M799.244 1059.27C853.381 1109.85 830.528 883.47 890.266 797.064C890.266 797.064 892.159 794.803 890.549 793.089C888.94 791.375 886.691 793.398 886.691 793.398C835.361 840.147 818.815 915.109 805.742 979.246C734.209 682.734 938.582 482.127 1167.61 198.395C1214.89 139.827 1174.03 120.259 1134.92 122.73C1042.7 139.568 951.837 208.397 866.75 250.499C762.959 305.019 647.997 382.597 539.263 424.309C502.564 438.382 484.462 423.04 511.536 385.157C562.847 313.243 635.733 233.879 691.8 165.276C723.906 126.541 759.194 88.7003 786.622 45.4369C808.513 14.9339 793.554 -19.6304 756.019 -7.60082C650.019 34.02 387.712 260.767 264.035 234.842C103.991 201.17 180.56 -81.9867 266.826 -187.443C267.378 -188.12 267.666 -188.965 267.627 -189.797C267.588 -190.63 267.226 -191.381 266.619 -191.89C265.756 -192.612 264.611 -192.928 263.438 -192.766C262.264 -192.604 261.157 -191.978 260.36 -191.027C142.398 -61.1426 73.3948 290.066 298.849 269.43C418.832 258.382 577.355 119.796 709.368 56.4351C716.501 53.008 739.27 43.1407 717.228 67.4122C623.381 170.549 526.374 272.503 447.47 388.275C377.94 496.027 473.186 510.352 555.169 474.073C710.962 415.305 883.992 303.824 1037.18 233.227C1061.53 222 1072.23 225.952 1052.13 250.876C856.786 492.863 694.686 732.045 782.417 973.447C740.673 930.736 677.901 898.129 613.577 912.264C613.577 912.264 610.818 912.518 610.437 914.824C610.056 917.13 612.595 917.668 612.595 917.668C691.173 946.542 756.118 1019 799.244 1059.27ZM766.047 33.5781C766.841 33.7544 766.645 33.5908 766.047 33.5781V33.5781ZM481.022 443.478C481.082 444.199 480.952 444.09 481.022 443.478V443.478Z" fill="#00FFFF"></path><path d="M244.581 -28.3651C231.394 47.2129 230.359 142.857 294.832 185.862C294.995 185.939 295.118 186.077 295.178 186.251C295.237 186.425 295.228 186.622 295.153 186.802C295.077 186.983 294.941 187.135 294.77 187.229C294.599 187.322 294.406 187.351 294.229 187.31C207.83 172.337 198.293 41.6511 243.179 -28.8067C243.255 -29.0023 243.401 -29.1667 243.586 -29.2636C243.771 -29.3606 243.98 -29.3822 244.166 -29.3236C244.352 -29.2651 244.5 -29.1312 244.578 -28.9514C244.656 -28.7717 244.657 -28.5608 244.581 -28.3651Z" fill="#00FFFF"></path><path d="M832.571 207.347C836.289 202.292 840.974 198.023 846.3 194.838C851.626 191.653 857.463 189.63 863.403 188.91C864.017 188.856 864.618 188.975 865.139 189.256C865.66 189.536 866.079 189.966 866.352 190.497C866.624 191.029 866.738 191.641 866.68 192.267C866.623 192.892 866.398 193.505 866.028 194.039C862.311 199.094 857.625 203.363 852.299 206.548C846.973 209.733 841.136 211.756 835.197 212.476C834.582 212.53 833.981 212.411 833.46 212.131C832.94 211.85 832.52 211.421 832.248 210.889C831.976 210.358 831.862 209.745 831.919 209.12C831.976 208.494 832.202 207.881 832.571 207.347Z" fill="#00FFFF"></path><path d="M901.175 169.724C964.97 107.165 1089.69 24.9407 1164.94 76.3624C1165.19 76.5691 1165.35 76.8606 1165.41 77.1909C1165.46 77.5212 1165.41 77.8713 1165.24 78.1853C1165.08 78.4994 1164.83 78.7595 1164.52 78.9243C1164.21 79.0891 1163.87 79.149 1163.54 79.0947C1079.06 57.7948 982.045 132.392 902.907 172.151C902.567 172.417 902.15 172.544 901.747 172.504C901.344 172.464 900.989 172.261 900.759 171.939C900.529 171.617 900.444 171.203 900.522 170.788C900.6 170.372 900.835 169.99 901.175 169.724Z" fill="#00FFFF"></path></g></svg>
          </div>
          <div className="TeamCTASection_content__MX0t9">
            <div 
              className={`TeamCTASection_imageWrapper__Lal5P ${isVisible ? 'fade-in-delay-1' : ''}`}
              style={{ opacity: isVisible ? 1 : 0, transform: isVisible ? 'none' : 'translateY(20px)' }}
            >
              <img 
                alt="Team working together" 
                loading="lazy" 
                width="350" 
                height="280" 
                decoding="async" 
                data-nimg="1" 
                className="TeamCTASection_teamImage__2KAuj" 
                style={{ color: 'transparent' }} 
                src="/coded/static/media/team.0fae05df.svg"
              />
            </div>
            <div 
              className={`TeamCTASection_textContent__qAuNi ${isVisible ? 'fade-in-delay-2' : ''}`}
              style={{ opacity: isVisible ? 1 : 0, transform: isVisible ? 'none' : 'translateY(20px)' }}
            >
              <h2 className="TeamCTASection_title__BUjLj">Instead of one freelancer doing less, you get an entire team moving your vision forward.</h2>
              <a href="#contactForm">
                <button className={`TeamCTASection_ctaButton__BCABz ${isVisible ? 'fade-in-delay-3' : ''}`}>
                  Let's Get Started
                  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="40" height="40" rx="20" fill="#17C2C2" />
                    <path d="M22.6328 14.7881C22.7532 14.786 22.8709 14.8191 22.9717 14.8818L23.0664 14.9551L28.5674 20.4561C28.6835 20.5723 28.749 20.7302 28.749 20.8945C28.749 21.0585 28.6841 21.2158 28.5684 21.332L23.0459 26.8545C22.9892 26.9154 22.9207 26.9642 22.8447 26.998C22.7687 27.0319 22.6867 27.0503 22.6035 27.0518C22.5203 27.0532 22.4375 27.038 22.3604 27.0068C22.2831 26.9757 22.2132 26.929 22.1543 26.8701C22.0954 26.8112 22.0488 26.7413 22.0176 26.6641C21.9864 26.5869 21.9712 26.5041 21.9727 26.4209C21.9742 26.3377 21.9925 26.2557 22.0264 26.1797C22.0603 26.1037 22.1091 26.0352 22.1699 25.9785L26.6338 21.5146H12.2832C12.1188 21.5146 11.961 21.4492 11.8447 21.333C11.7285 21.2167 11.6631 21.0589 11.6631 20.8945C11.6631 20.7301 11.7285 20.5723 11.8447 20.4561C11.961 20.3398 12.1188 20.2745 12.2832 20.2744H26.6338L22.1904 15.8311C22.0809 15.7135 22.0206 15.5581 22.0234 15.3975C22.0263 15.2369 22.0915 15.0833 22.2051 14.9697C22.3187 14.8562 22.4722 14.791 22.6328 14.7881Z" fill="white" stroke="white" strokeWidth="0.826773" />
                  </svg>
                </button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}